<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      
    </title>

    <link
      rel="stylesheet"
      href="https://dev.arcgisonline.cn/jsapi/4.15/esri/css/main.css"
    />
    <script src="https://dev.arcgisonline.cn/jsapi/4.15/init.js"></script>

    <script>
      require([
        "esri/Map",
        "esri/layers/FeatureLayer",
        "esri/layers/SceneLayer",
        "esri/layers/TileLayer",
        'esri/layers/MapImageLayer',
        'esri/views/SceneView',
        "esri/core/promiseUtils",
        "esri/core/urlUtils",
        "esri/Basemap",
        "esri/widgets/Legend",
        "esri/widgets/Home",
        "esri/widgets/Slider",
        "esri/widgets/Fullscreen",
        'dojo/domReady!'
      ], function (
        Map,
        FeatureLayer,
        SceneLayer,
        TileLayer,
        MapImageLayer,
        ScenesView,
        promiseUtils,
        urlUtils,
        Basemap,
        Legend,
        Home,
        Slider,
        Fullscreen
      ) {

 var hiddenBuildIds= [4020, 4021, 4100, 4101, 4102, 4104, 4105, 4103, 4107, 4110,
        4113, 4109, 4111, 4098, 4108, 4093, 4096, 4097, 4094, 4095,
        4099, 4112, 4114, 4106, 4121, 4117, 4119, 4115, 4120, 4116,
        4118, 4019, 4022, 4023, 4016, 4018, 4088, 4090, 4091, 4087,
        4089, 4092, 4066, 4065, 4067, 4081, 4070, 4072, 4068, 4069,
        4014, 4015, 4017, 4012, 4013, 4078, 4086, 4075, 4084, 4079,
        4083, 4085, 4080, 4077, 4073, 4074, 4076, 4082, 4071, 4024,
        4028, 4036, 4035, 4032, 4029, 4034, 4030, 4031, 4030, 4025,
        4026, 4055, 4052, 4053, 4042, 4049, 4050, 4051, 4046, 4048,
        4043, 4054, 4047, 4064, 4062, 4027, 4037, 4039, 4038, 4040,
        4041, 4063, 4060, 4059, 4056, 4057, 4061, 4044, 4045, 4058,
        1266, 2834, 2837, 2839, 2832, 2847, 3129, 3130, 3211, 3244,
        3245, 3236, 3237, 3231, 3227, 3231, 3838,
        6139, 6128, 6126, 6125, 6132, 6138, 6137,
        6024,6027,6020,6060,5998,5941,5944,5952,5947,5989,5903,5977,5983,5877,
        5859,5866,5858,5860,
        3142, 3158, 3246, 3232, 3681, 3234, 3235, 3236, 3645, 3638,
        3641, 3598, 1291, 1306, 1308, 1300, 1307, 3360, 3354, 6127,
        6129, 6131, 6130, 6129, 6143, 6135, 6134, 6136, 6133, 6146,
        6145, 6144, 6140, 6142, 6154, 6156, 6157, 6141, 6147, 6165,
        6166, 6163, 6164 ,6148, 6158, 6159, 6110, 6111, 6054, 6055,
        6040, 6041, 6042, 6043, 6044, 6045, 6046, 6047, 6048,
        3598, 3603, 3353, 3358,3369,3383,3367,3355,3380,3357,
        3364,3370,3396,3394,3397,3430,3439,3437,3441,3607,
        3609,3613,3571,3638,3645,8252,8243,8254,8233,8251,
        10494,10520,7567,7551,7549,7550,7586,7577,7589,7622,
        7601,7616,7621,7608,7615,7614,7600,7610,7619,7604,
        7644,7645,7693,7696,7697,7698,7701,7692,7704,7688,
        7655,7653,7673,7679,7665,7656,7676,7677,7680,7654,
        7659,7663,7702,7652,7668,7669,7846,7847,7834,7837,
        7851,7852,7844,7845,7848,7820,7814,7872,7221,7822,
        7818,7813,7827,7873,7817,7812,7815,7816,5228,5229,
        5230,5220,5221,5222,5227,5225,5193,5194,5242,5245,
        5238,5239,6084,6085,6086,6087,6088,6089,6090,6091,
        6092,6093,6094,6095,6096,6097,6098,6099,6100,6101,
        6102,6103,6104,6105,6106,6107,6108,6109,6110,6111,
        6112,6113,6114,6115,6116,6117,6118,6119,6120,6121,
        6122,6123,6124,5947,5945,5943,6007,6000,5990,6062,
        6064,6061,6063,5995,5994,5997,6007,6008,5943,5948,
        5945,5950,5951,5947,5956,5903,5991,5989,6017,6014,
        6015,6016,6017,5942,5949,5946,1710,6385,6387,6400,
        6403,6406,6401,6402,6414,6397,6427,6419,6422,6496,
        6500,6504,6499,6510,6514,6515,6511,6556,6553,6523,
        6524,6522,6525,6528,6520,6521,6527,6528,6529,6530,
        6531,6532,6533,6534,6535,6536,
        5236,5240,5235,5241,5141,5150,5117,5118,5119,5125,
        5115,5116,5123,5124,5056,5055,5062,5063,5061,5092,
        5090,5051,5052,5058,5060,5103,5109,5106,5108,5102,
        5111,5101,5105,5110,5097,5098,5099,5066,5065,5070,
        5088,4858,4872,4866,4861,4854,4875,4870,4865,4855,
        4860,4863,4880,4873,4879,4871,4878,4868,4876,4851,
        4850,7476,7474,7475,7480,7477,7493,7491,7490,7492,
        7478,7479,7481,7485,7482,7483,7486,7488,7489,7484,
        7487,8009,7999,7738,7743,7745,7726,7744,7728,7729,
        7739,7735,7736,7737,7730,7741,7727,7732,7740,7733,
        7734,7742,7746,7725,7711,7723,7724,7705,7709,7710,
        7706,7707,7708,7989,7963,7982,7983,7984,7985,7965,
        7987,7961,7952,7958,7977,7954,7994,7953,7967,7949,
        7756,7758,7759,6267,6268,6269,6289,6315,6320,6289,
        6292,6306,6312,6319,6309,6294,6297,6298,6291,6285,
        6307,6356,6357,6282,6338,6345,6355,6857,6864,5868,
        5861,5870,5828,5865,5869,5871,5827,5856,5824,5825,
        5826,5829,5931,5853,5921,5926,5920,5919,5916,5927,
        5920,5922,5924,5906,5908,5911,5914,5972,5969,5970,
        6013,5959,5980,5982,5979,6037,6034,6033,6032,6036,
        6030,5981,6016,5955,5731,5734,5738,5771,5769,5756,
        5754,5749,5752,5669,5685,5692,5689,5694,5779,5780,
        5781,5778,5655,5623,5652,5650,5636,5637,5641,5639,
        5628,5621,5620,5630,5624,5631,5632,5627,5638,5560,
        5550,5557,5558,5559,5556,5551,5552,5553,5554,5555,
        4762,4765,4764,7721,7719,7712,7713,7714,7014,7024,
        7032,7020,7019,7016,7015,7018,7017,7025,6161,6162,
        6153,6149,6151,6152,6150,
        7761,7762,7765,7754,7763,7755,7769,7770,7771,7772,
        7773,7774,7775,7776,7777,7778,7767,7749,7764,7768,
        7781,7782,7784,7783,7766,7757,7750,7751,7753,8000,
        8001,8010,7792,7788,7793,7786,7798,7800,7791,7797,
        7794,7789,7787,7785,7795,7801,7796,7799,5088,5099,
        5070,5065,5066,5097,5098,5102,5111,5101,5105,5106,
        5013,5108,5109,5058,5060,5051,5052,5090,5092,5062,
        5055,5061,5063,5123,5124,5125,5119,5115,5116,5117,
        5118,5141,5150,5235,5241,5245,5240,5236,5242,5225,
        5227,5220,5221,5228,5229,
        6051,6070,6052,6072,6071,6069,6065,6039,6038,6057,
        6081,6083,6082,6066,6067,6050,6049,6058,6059,6074,
        6074,6068,6075,6080,6056,6078,6077,6079,6076,6053,
        6026,5993,5992,4804,4802,4815,6803, 6865,6863,6861,
        6862,6852,6847,6826,7731,7720,7718,7717,7715,7722,7716,7748,7747,
        1268,1269,1270,1271,1262,1255,1258,
        6895, 6898,4768,4771,4774,4767,4769,4773,4772,4780,
        4781,4783,4782, 4784,4778,4777,4779,5513,4805,4847,
        5509, 5523,5508, 5515,5493, 5489,5491,5486,
        5522, 5548,5547,5510,5484,5542,5488,5541,
        5540,5487,5544,5521,5517,5472,5532,5473, 5481,5536,5864,
        5506,5524,5528,5538,5535,5483,5478,5475,5474,5477,5471,6526,6546,6547,
        5479, 5482,5476, 5505,5465, 5529,5526,5468,5467,5496,5464,6439,6344,6342,6329,
        5494, 5373,5367, 5368,5366,5370,5372,5399,5400,5401,5394,4789,6322,
        5395,5396,5397,5393,5402,5386,5392,5391,5389,5387,5388,5385,5381,5857,
        5383, 5470, 5531,5530,5466,5492,5490,5539,5485,5512,4775,6073,6160,6155,
        4797,5398,5390,5381,5365,5375,5469,5495,4812,4806,4763,4766,4776,4770,5549,
        5458, 5527, 5500, 5526, 5503, 5529, 5498, 5513, 5514, 5507, 5547, 5516, 5523, 5511, 5509, 5522, 5548, 5510, 5546, 5520, 5521, 5543, 5519, 5544, 5517, 5508, 5518, 5512, 5545, 5499, 5502, 5504, 5497, 5505, 5501, 5525, 5538, 5480, 5536, 5481, 5533, 5506, 5537, 5535, 5479, 5483, 5534, 5524, 5528,
        6857, 6858, 6859, 6850, 6854, 6851, 6860, 6848, 6845, 6847, 6844, 6842, 6826, 6827, 6830, 6833, 6824, 6825, 6835, 6852, 6807, 6804, 6839, 6840, 6837, 6838, 6836, 6841, 6832, 6843, 6846, 6810, 6809, 6808, 6817, 6812, 6811, 6831, 6814, 6815, 6806, 6821, 6816, 6823, 6855, 6849, 6822, 6820, 6819, 6828, 6861, 6818,
        6782, 6741, 6773, 6772, 6780, 6762, 6763, 6770, 6765, 6771, 6748, 6781, 6776, 6778, 6775, 6774, 6784, 6764, 6746, 6749, 6759, 6766, 6750, 6769, 6767, 6756, 6758, 6777, 6779, 6768, 6783, 6744, 6761, 6747, 6753, 6755, 6760, 6757, 6751, 6752, 6754,
        6741, 6742, 6692, 6740, 6724, 6736, 6693, 6729, 6689, 6738, 6726, 6698, 6730, 6709, 6699, 6721, 6722, 6723, 6703, 6705, 6732, 6707, 6712, 6715, 6695, 6708, 6687, 6718, 6719, 6717, 6716, 6713, 6733, 6745, 6720, 6743, 6694, 6686, 6691, 6697, 6728, 6685, 6690, 6737, 6734, 6702, 6688, 6739, 6711, 6696, 6725, 6710, 6731, 6735, 6701, 6700, 6714, 6706, 6704, 6727,
      ]

       let abc = hiddenBuildIds.map((id) => `${id}`);

         // 建筑白模
        var white_building_layer = new SceneLayer({
          id: 'tjbm-scene-lyr',
          url: 'https://tjscim.arcgisonline.cn/server/rest/services/Hosted/nopic_0918/SceneServer',
          outFields: ['*'],
          elevationInfo: {
            mode: 'on-the-ground',
          },
        });
        let filterExpression = `ObjectId not in (${abc})`;
        white_building_layer.definitionExpression = filterExpression

         let sxkg_area_layer = new MapImageLayer({
          url: 'https://tjscim.arcgisonline.cn/server/rest/services/%E5%BB%BA%E8%AE%BE%E8%AE%A1%E5%88%92%E5%BA%95%E5%9B%BE/MapServer',
          id: 'sxkg-polygon',
          elevationInfo: {
            mode: 'on-the-ground'
          }
        })


        var map = new Map({
          layers: [white_building_layer, sxkg_area_layer],
        });

        var view = new ScenesView({
          map: map,
          container: "viewDiv",
          resizeAlign: "top-left",
        });

        view.ui.empty("top-left");
        view.ui.add(titleDiv, "top-left");
        view.ui.add(
          new Home({
            view: view,
          }),
          "top-left"
        );
        view.ui.add(
          new Legend({
            view: view,
          }),
          "bottom-left"
        );
        view.ui.add(
          new Fullscreen({
            view: view,
            element: applicationDiv,
          }),
          "top-right"
        );
        view.whenLayerView(layer).then();
        view.when(function(){
          window.view = view;
          // view.goTo(layer.fullExtent);
        })
      });
    </script>

    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
      }

      #applicationDiv {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      #viewDiv {
        width: 100%;
        height: 100%;
        flex: 1 1 auto;
        order: 1;
      }

      #titleDiv {
        display:none;
        font-weight: 400;
        font-style: normal;
        font-size: 1.2019rem;
        padding: 10px;
      }
    </style>
  </head>

  <body>
    <div id="applicationDiv">
      <div id="viewDiv">
        <div id="titleDiv" class="esri-widget"></div>
      </div>
    </div>
  </body>
</html>
